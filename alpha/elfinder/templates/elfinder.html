<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>elFinder</title>
    <meta http-equiv="content-language" content="ru" />
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link type="text/css" href="/static/elfinder/css/ui-lightness/jquery-ui-1.10.3.custom.css" rel="stylesheet" />
    <link href="/static/elfinder/css/elfinder.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/elfinder/css/theme.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="/static/date/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="/static/date/js/jquery-migrate-1.2.1.js"></script>
    <script type="text/javascript" src="/static/date/js/jquery-ui-1.10.3.custom.min.js"></script>
    <script type="text/javascript" src="/static/elfinder/js/elfinder.min.js"></script>

<script type="text/javascript">
    //<![CDATA[
    function getUrlParam(paramName) {
        var reParam = new RegExp('(?:[\?&]|&amp;)' + paramName + '=([^&]+)', 'i') ;
        var match = window.location.search.match(reParam) ;
        
        return (match && match.length > 1) ? match[1] : '' ;
    }

    $().ready(function() {
        var funcNum = getUrlParam('CKEditorFuncNum');

        var elf = $('#elfinder').elfinder({
            url : '/elfinder/connector/',
            getFileCallback : function(file) {                
                window.opener.CKEDITOR.tools.callFunction(funcNum, "/media/elfinder/" + file.path);
                window.close();
            },
            resizable: false,
            customData : { csrfmiddlewaretoken : '8eIZYnvV9EQzGI9myCUltQBN72NweOvA',  },
            onlyMimes: ["image"],
            commands: ['open', 'reload', 'quicklook', 'rm', 'rename', 'upload', 'search', 'view', 'sort']
        }).elfinder('instance');
    });
    //]]>
</script>
</head>
<body>
<div id="elfinder"></div>
</body>
</html>